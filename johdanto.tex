\chapter{Johdanto}
\label{ch:johdanto}
Sähköverkko koostuu tuotantolaitoksista, sähkölinjoista ja sähköasemista. Sähköasemilla on erilaisia tehtäviä verkossa. Näitä ovat esimerkiksi jännitteen muuntaminen, verkon jakaminen ja sen toiminnan tarkkailu. Nykypäivänä asemien toiminnallisuutta voidaan seurata ja ohjata etäohjauksella verkon yli. Tätä kautta etäohjelman on mahdollista saada tietoa aseman toiminnasta ja sen tilasta. Sähköaseman yksi tärkeä tehtävä on suojata ja tarkkailla verkon toimivuutta, ja esimerkiksi vikatilanteessa katkaista linjasta virrat pois. Tällainen vikatilanne on esimerkiksi kaapelin poikki meneminen, joka aiheuttaa vaarallisen oikosulkutilanteen.

Tässä diplomityössä on tarkoituksena suunnitella hajautetun järjestelmän arkkitehtuuri ja toteuttaa ohjelmisto osaksi isompaa sähköasemiin liittyvää järjestelmää. Tavoitteena on saada tietoa verkon yli sähköaseman automaatiolaitteelta ja jakaa saatu tieto järjestelmän muiden osien kanssa. Työssä käsitellään hajautetun järjestelmän paradigmoja ja analysoidaan mitkä niistä sopisivat tilanteeseen parhaiten. Analyysin tuloksien ja ohjelmistolle asetettujen vaatimusten perusteella päädytään kokonaisuuden suunnitelmaan. Suunnitelma toteutetaan ohjelmistoksi, joka toimii osana olemassa olevaa isompaa järjestelmää. Toteutus jakaa sähköaseman tietoa järjestelmän muille osille, joita ovat esimerkiksi mittaustiedon näyttäminen ja aseman tilan tarkkailu käyttöliittymäkomponenteissa.

Tieto saadaan sähköasemilla olevilta \emph{älykkäiltä elektroniikkalaitteilta} (engl. \emph{Intelligent Electronic Device}, lyhennetään \emph{IED}). IED-laite on verkkoon kytketty sähköaseman automaatiolaite, jota kutsutaan myös nimellä suojarele. IED-laite voidaan kytkeä ja konfiguroida toteuttamaan monta aseman eri funktionaalisuutta. IED:t voivat kommunikoida paikallisverkon yli aseman muun laitteiston ja IED-laitteiden kanssa, ja näin toteuttaa aseman toiminnallisuutta. Nykypäivänä verkon nopeus mahdollistaa reaaliaikaisen kommunikoinnin asemalla sen eri laitteiden välillä. IED-laitteet voivat myös kommunikoida aseman paikallisverkosta ulospäin, esimerkiksi keskitettyyn ohjauskeskukseen. Yksi IED-laite voidaan esimerkiksi konfiguroida hoitamaan sähkölinjan kytkimenä oloa. Tällöin se tarkkailee linjan toimintaa mittaamalla arvoja, kuten jännitettä ja virtaa. Vikatilanteen sattuessa IED ohjaa aseman laitteita toimimaan oikein enempien vahinkojen välttämiseksi. \cite{Brunner2008}

IED-laitteet noudattavat kommunikoinnissa maailmanlaajuisesti määritettyä \emph{IEC 61850 -standardia} (engl. \emph{International Electrotechnical Commission}). Standardin tarkoituksena on määrittää yhteinen kommunikointiprotokolla ja säännöt aseman kaikkien eri laitteiden välille. Tarkoituksena on ehkäistä jokaista valmistajaa tuottamasta omia versioita ja protokollia omille laitteilleen. Standardia noudattamalla eri IED-laitteet pystyvät kommunikoimaan keskenään yhteisillä säännöillä \cite[s.~624]{Mackiewicz2006}. Standardi määrittää myös asemalta tiedon saamisen mekanismit, joita aseman ulkopuolisen ohjelman täytyy noudattaa. Nämä määritykset ovat tämän työn kannalta tärkein osa standardia ja vaikuttavat hajautetun järjestelmän suunnitteluun. Standardi on määritetty niin, että laitteiden kommunikointi voi tapahtua monella eri teknisellä alustalla. Tässä työssä standardin määrityksiä käytetään ainoastaan TCP/IP-protokollaperheen päällä.

Diplomityön tekijä oli jo ennen tämän työn aloitusta Alsus Oy:ssä toteuttanut yksinkertaisen demo-ohjelmiston (engl. proof of concept). Ohjelmisto kykeni saamaan tietoa asemalta standardin mukaisesti ja tallentamaan sen tietokantaan. Toteutus oli puutteellinen ja siinä oli toimintaan liittyviä ongelmia, jotka haittasivat sen jatkokehitystä tuotantoon asti. Demon tarkoituksena oli opettaa tekijälle standardia ja sen mekanismeja ennen oikeaa toteutusta. Tässä työssä analysoidaan demon toimintaa ja sen ongelmia. Nämä tulokset yhdistetään aikaisemmin mainitun hajautetun järjestelmän suunnittelun kanssa. Lopputuloksena saadaan toimiva kokonaisuuden suunnitelma uudelle toteutukselle.

Tämän diplomityön rakenne alkaa pohjatietojen käsittelyllä. Ensin käsitellään IEC 61850 -standardia ja sen toimintaa. Tämän jälkeen käydään läpi järjestelmän hajautusta ja siihen liittyviä kommunikointiparadigmoja. Pohjatietojen avulla analysoidaan erilaisia hajautuksen vaihtoehtoja ja mitkä niistä sopisivat tähän toteutukseen parhaiten. Tästä tuloksena on järjestelmän hajautukseen liittyvät tiedot, johon toteutus tähtää. Seuraavaksi työssä analysoidaan demon toimintaa ja sen ongelmia. Tuloksena on tietoa mikä otetaan huomioon uuden version toteutuksessa ja tekniikassa. Järjestelmän hajautuksen ja edellä mainitun demon analyysien perusteella suunnitellaan ohjelmistoarkkitehtuuri ja sen tekniikat. Toteutusosuus käsittelee ohjelmiston toteuttamista valituilla tekniikoilla. Työn lopussa arvioidaan ja pohditaan tuloksia asetettuihin tutkimuskysymyksiin ja miten tavoitteisiin päästiin. Lisäksi käsitellään myös toteutuksen tulevaisuutta ja mahdollisia vaihtoehtoisia toteutustapoja.


\section{Vaatimukset}
\label{ch:vaatimukset}
Diplomityön suunnittelulle ja toteutukselle asetettiin vaatimuksia, jotka ohjelmiston pitää pystyä täyttämään. Vaatimuksien tehtävä on asettaa työlle selvät tavoitteet mitä järjestelmään halutaan tuoda lisää. Diplomityön tehtävä on tiedon analyysin ja tutkimustyön kautta löytää sopivat menetelmät suunnitteluun ja sen toteutukseen. Asetettuja vaatimuksia käytetään pohjana työssä tehdyille päätöksille. Pohdintaosiossa vaatimuksilla arvioidaan työn tavoitteisiin pääsyä ja eri ratkaisuvaihtoehtoja. Kaikki vaatimukset oli asetettu jo ennen työn aloittamista tai sen alkuvaiheessa.

Ohjelmistolle asetettiin mm. seuraavia vaatimuksia:
\begin{itemize}
	\item saada tieto IED-laitteelta IEC 61850 -standardin mukaisesti,
	\item saada tieto jaettua järjestelmässä siitä kiinnostuvien komponenttien kanssa,
	\item tiedon jaossa halutaan varautua tulevaisuuteen niin, että se olisi helposti saatavissa myös järjestelmän uusille komponenteille,
	\item muu järjestelmä ohjaa milloin tiedon haku IED-laitteelta aloitetaan ja lopetetaan,
	\item tietoa haluavien komponenttien määrä voi vaihdella tiedon hakemisen aloitusten välillä,	
	\item komponenttien täytyy saada ilmoitus uudesta tiedosta ilman erillistä kyselyä,
	\item tiedot puskuroidaan myöhempää käsittelyä varten jos komponentti ei ehdi niitä heti käsitellä,
	\item komponentin pitää pystyä suodattamaan tietoa sen lähteen identiteetin (IED-laitteen) perusteella,
	\item tiedon jakamisen muoto pitää olla helposti ymmärrettävä osapuolten kesken,
	\item IED-laitteelta haluttu tiedon määrä voi vaihdella aloitusten välillä,
	\item tiedon välityksen tekniikka täytyy tukea verkkopalvelun tapauksessa TCP/IP-pro\-to \-kol\-la\-mää\-ri\-tyk\-si\-ä tai vastaavaa, ja
	\item tiedonsiirrossa lähetystakuu ei ole välttämättömyys.
\end{itemize}

Osa vaatimuksista tulevat muun järjestelmän toimintaperiaatteista ja kuinka sitä käytetään. Käyttäjän on tarkoitus pystyä ohjaamaan tiedon saantia ja määrää sähköasemilta käyttöliittymän kautta. Tästä seurauksena on vaatimus, jossa muun järjestelmän täytyy ohjata tiedon hakuun liittyviä osia. Uusien järjestelmän komponenttien kehitys halutaan pitää helppona. Tämän takia tiedon saamisen rajapinnat tulee suunnitella komponentissa helposti käytettäväksi. Rajapinnan tulee tarjota tieto helposti ymmärrettävässä muodossa, ilmoituksia uuden tiedon saapumisesta ja sen puskurointi. Komponentille pitää tarjota mahdollisuus erottaa tai saada tietoa IED-laitteen mukaan. Tämä sen takia, koska järjestelmä käsittelee paljon erilaisia IED-laitteita ja sähköasemia. Komponenttien pitää pystyä erottamaan mikä on tiedon alkuperä. Esimerkkinä tietyn IED-laitteen mittaustiedon näyttäminen. Tiedonsiirtoon ei alustavasti tarvittu lähetystakuita tiedon tyypin takia (mittausdata). Uusi tieto korvaa edellisen lähetyksen tiedot. Olisi tavoiteltavaa, että toteutus mahdollistaisi tämän tulevaisuuden varalta. Muu järjestelmä ja sen osat ovat toteutettu web-sovelluksena. Tästä tulee vaatimus, että tieto täytyy onnistua kuljettamaan osapuolten välillä TCP/IP-protokollaperheen tai muun vastaavan avulla.


\section{Tutkimuskysymykset}
Ohjelmiston vaatimuksien lisäksi diplomityölle asetettiin selviä tutkimuskysymyksiä, joihin työn aikana yritetään etsiä vastausta. Tutkimuskysymykset liittyvät työhön korkealla tasolla ja käsittelevät sen kokonaisuudesta eri kohtia. Tutkimuskysymyksiä käytetään myös työn lopussa tuloksien pohdinnassa.

Työlle asetettiin seuraavat tutkimuskysymykset:
\begin{itemize}
	\item \emph{Mitkä eri hajautetun järjestelmän kommunikointiparadigmoista sopivat työn vaatimuksien asettaman ongelman ratkaisuun ja mitkä eivät?}
	\item \emph{Minkälainen on hajautetun järjestelmän ohjelmistoarkkitehtuuri, joka täyttää asetetut vaatimukset?}
	\item \emph{Järjestelmän hajautuksessa, mikä olisi sopiva tiedon jakamisen muoto eri osapuolten välillä?}
	\item \emph{Mitkä olivat syyt demoversion ongelmiin ja kuinka nämä estetään uudessa versiossa?}
\end{itemize}