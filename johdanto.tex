\chapter{Johdanto}
\label{ch:johdanto}
Sähköverkko koostuu tuotantolaitoksista, sähkölinjoista ja sähköasemista. Sähköasemilla on erilaisia tehtäviä verkossa. Näitä ovat esimerkiksi jännitteen muuntaminen, verkon jakaminen ja sen toiminnan tarkkailu. Nykypäivänä asemien toiminnallisuutta voidaan seurata ja ohjata etäohjauksella verkon yli. Etäohjelman on mahdollista saada tietoa aseman toiminnasta ja sen tilasta. Sähköaseman yksi tärkeä tehtävä on suojata ja tarkkailla verkon toimivuutta, ja esimerkiksi vikatilanteessa katkaista linjasta virrat pois. Tällainen vikatilanne on esimerkiksi kaapelin poikkimeno, joka aiheuttaa vaarallisen oikosulkutilanteen.

Tässä diplomityössä on tarkoituksena suunnitella hajautetun järjestelmän arkkitehtuuri ja toteuttaa ohjelmisto osaksi isompaa sähköasemiin liittyvää järjestelmää. Tavoitteena on saada tietoa verkon yli sähköaseman automaatiolaitteelta ja jakaa saatu tieto järjestelmän muiden osien kanssa. Työssä käsitellään hajautetun järjestelmän paradigmoja ja analysoidaan mitkä niistä sopisivat tilanteeseen parhaiten. Analyysin tuloksien ja ohjelmistolle asetettujen vaatimusten perusteella päädytään kokonaisuuden suunnitelmaan. Suunnitelma toteutetaan ohjelmistoksi, joka toimii osana olemassa olevaa isompaa järjestelmää. Toteutus jakaa sähköaseman tietoa järjestelmän muille osille, joita ovat esimerkiksi mittaustiedon näyttäminen ja aseman tilan tarkkailu käyttöliittymäkomponenteissa.

Tieto saadaan sähköasemilla olevilta \emph{älykkäiltä eletroniikkalaitteilta} (engl. \emph{Intelligent Electronic Device}, lyhennetään \emph{IED}). IED-laite on sähköaseman automaatiolaite jota kutsutaan myös nimellä suojarele. IED-laite voidaan kytkeä ja konfiguroida toteuttamaan monta aseman eri funktionaalisuutta ja ne on myös kytketty aseman verkkoon. IED:t voivat kommunikoida paikallisverkon yli aseman muun laitteiston ja IED-laitteiden kanssa, ja näin toteuttaa aseman toiminnallisuutta. Nykypäivänä verkon nopeus mahdollistaa reaaliaikaisen kommunikoinnin asemalla sen eri laitteiden välillä. IED-laitteet voivat myös kommunikoida aseman paikallisverkosta ulospäin, esimerkiksi keskitettyyn ohjauskeskukseen. Yksi IED-laite voidaan esimerkiksi konfiguroida hoitamaan sähkölinjan kytkimenä oloa, joka myös tarkkailee linjan toimintaa mittaamalla arvoja, kuten jännitettä ja virtaa. Vikatilanteen sattuessa IED ohjaa aseman laitteita toimimaan oikein enempien vahinkojen välttämiseksi. \cite{Brunner2008}

IED-laitteet noudattavat kommunikoinnissa maailmanlaajuisesti määritettyä \emph{IEC 61850 -standardia} (engl. \emph{International Electrotechnical Commission}). Standardin tarkoituksena on määrittää yhteinen kommunikointiprotokolla ja säännöt aseman kaikkien eri laitteiden välille. Tarkoituksena on ehkäistä jokaista valmistajaa tuottamasta omia versioita ja protokollia omille laitteilleen. Standardia noudattamalla eri IED-laitteet pystyvät kommunikoimaan keskenään yhteisillä säännöillä \cite[s.~624]{Mackiewicz2006}. Standardi määrittää myös asemalta tiedon saamisen mekanismit, joita aseman ulkopuolisen ohjelman täytyy noudattaa. Nämä määritykset ovat tämän työn kannalta tärkein osa standardia ja vaikuttavat järjestelmän hajautuksen suunnitteluun. Standardi on määritetty niin, että laitteiden kommunikointi voi tapahtua monella eri teknisellä alustalla. Tässä työssä standardin määrityksiä käytetään pelkästään TCP/IP-protokollaperheen päällä.

Diplomityön tekijä oli jo ennen tämän työn aloitusta Alsus Oy:ssä toteuttanut yksinkertaisen demo-ohjelmiston (engl. proof of concept). Ohjelmisto kykeni saamaan tietoa asemalta standardin mukaisesti ja tallentamaan sen tietokantaan. Toteutus oli puutteellinen ja siinä oli toimintaan liittyviä ongelmia, jotka haittasivat sen jatkokehitystä tuotantoon asti. Demon tarkoituksena oli ennemminkin opettaa tekijälle standardia ja sen mekanismeja ennen oikeaa toteutusta. Tässä työssä analysoidaan demon toimintaa ja sen ongelmia. Nämä tulokset yhdistetään aikaisemmin mainitun hajautettujen järjestelmien analyysin tuloksien kanssa, jotta lopputuloksena saadaan toimiva suunnitelma uudelle toteutukselle.

Tämän diplomityön rakenne alkaa pohjatietojen käsittelyllä. Ensin käsitellään IEC 61850 -standardia ja sen toimintaa. Tämän jälkeen käydään läpi järjestelmän hajautusta ja siihen liittyviä kommunikointiparadigmoja. Pohjatietojen avulla analysoidaan erilaisia hajautuksen vaihtoehtoja ja mitkä niistä sopisivat tähän toteutukseen parhaiten. Tästä tuloksena on järjestelmän hajautukseen liittyvät tiedot johon toteutus tähtää. Seuraavaksi työssä analysoidaan demon toimintaa ja sen ongelmia. Tuloksena on tietoa mitä täytyy ottaa huomioon uuden version toteutuksessa ja tekniikasssa. Järjestelmän hajautuksen ja edellä mainitun demon analyysien perusteella suunnitellaan ohjelmisto arkkitehtuuri ja sen tekniikat. Tämän jälkeen käydään läpi kuinka suunniteltu ohjelmisto toteutettiin. Työn lopussa arvoidaan ja pohditaan tuloksia asetettuihin tutkimuskysymyksiin ja miten tavoitteisiin päästiin. Lisäksi käsitellään myös toteutuksen tulevaisuutta ja mahdollisia vaihtoehtoisia toteutustapoja.


\section{Vaatimukset}
\label{ch:vaatimukset}
Diplomityön suunnittelulle ja toteutukselle asetettiin vaatimuksia jotka ohjelmiston pitäisi pystyä täyttämään. Vaatimuksien tehtävä on asettaa työlle selvät tavoitteet mitä järjestelmään halutaan tuoda lisää. Diplomityön tehtävä on tiedon analyysin ja tutkimustyön kautta löytää sopivat menetelmät suunnitteluun ja toteutukseen. Asetettuja vaatimuksia käytetään työn lopussa tulosten pohdintaan ja kertomaan kuinka hyvin tavoitteisiin päästiin. Lisäksi vaatimuksia käytetään pohjana työssä tehdyille valinnoille. Ohjelmiston vaatimukset oli yrityksessä jo asetettu etukäteen ennen työn aloittamista. Ohjelmistolle asetettiin mm. seuraavia vaatimuksia:
\begin{itemize}
	\item tieto saada IED-laitteelta IEC 61850 -standardin mukaisesti,
	\item tieto saada jaettua järjestelmässä siitä kiinnostuvien komponenttien kanssa,
	\item muu järjestelmä ohjaa milloin tieton haku IED-laitteelta aloitetaan ja lopetetaan,
	\item tiedon jaossa halutaan varautua tulevaisuuteen niin, että se olisi helposti saatavissa myös järjestelmän uusille komponenteille,
	\item komponenttien pitäisi saada ilmoitus uudesta tiedosta ilman erillistä kyselyä,
	\item viestejä puskuroidaan myöhempää käsittelyä varten jos komponentti ei kerkeä niitä heti käsitellä,
	\item tietoa pitää pystyä jakamaan muille osapuolille sen lähteen identiteetin (IED-laitteen) perusteella,
	\item tiedon jakamisen muoto pitää olla helposti ymmärrettävä osapuolten kesken,
	\item IED-laitteelta saatava tiedon määrä voi vaihdella ajojen välillä, ja
	\item tiedon välityksen tekniikka täytyy tukea verkkopalvelun tapauksessa TCP/IP-pro\-to \-kol\-la\-mää\-ri\-tyk\-si\-ä.
\end{itemize}


\section{Tutkimuskysymykset}
Ohjelmiston vaatimuksien lisäksi diplomityölle asetettiin selviä tutkimuskysymyksiä joihin työn aikana yritetään etsiä vastausta. Tutkimuskysymykset liittyvät työn kokonaisuuteen korkealla tasolla ja käsittelevät sen eri kohtia. Tutkimuskysymysten tarkoitus on antaa työlle selvät tutkimuksen aiheet joihin etsitään vastauksia. Tutkimuskysymyksiä käytetään myös työn lopussa tuloksien pohdinnassa. Työlle asetettiin seuraavat tutkimuskysymykset:
\begin{itemize}
	\item \emph{Mitkä eri hajautetun järjestelmän kommunikointiparadigmoista sopivat työn vaatimuksien asettaman ongelman ratkaisuun ja mitkä eivät?}
	\item \emph{Minkälainen on hajautetun järjestelmän ohjelmistoarkkitehtuuri joka täyttää asetetut vaatimukset?}
	\item \emph{Järjestelmän hajautuksessa, mikä olisi sopiva tiedon jakamisen muoto eri osapuolten välillä?}
	\item \emph{Mitkä olivat syyt demoversion suorituksen ongelmiin ja kuinka nämä estetään uudessa versiossa?}
\end{itemize}